{% extends "base.html" %}
{% block title %}Book Appointment with  {{ doctor.username }}{% endblock %}

{% block content %}

<style>
:root{
    --blue-dark:#0a2540;
    --green-dark:#0d6d3d;
    --green-soft:#1fa971;
    --bg:#eef4f9;
    --card:#ffffff;
    --text:#1f2933;
    --border:#d9e3ec;
    --danger:#c62828;
}

/* CONTAINER */
.page-container{
    max-width:900px;
    margin:50px auto;
    padding:0 20px;
}

/* PAGE TITLE */
.page-container h2{
    text-align:center;
    font-size:28px;
    color: var(--green-dark);
    margin-bottom:30px;
    font-weight:700;
}

/* APPOINTMENT TABLE */
.appointment-table{
    width:100%;
    border-collapse: collapse;
    background: var(--card);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 6px 18px rgba(0,0,0,0.1);
}

.appointment-table th, .appointment-table td{
    padding:12px 10px;
    text-align:center;
    font-size:15px;
}

.appointment-table th{
    background: var(--green-dark);
    color:white;
    font-weight:600;
}

.appointment-table tr:nth-child(even){
    background:#f4f8f4;
}

.appointment-table tr:hover{
    background:#e8f5e9;
}

/* BOOK BUTTON */
.book-btn{
    background: linear-gradient(135deg, var(--green-dark), var(--green-soft));
    color:white;
    padding:8px 12px;
    border:none;
    border-radius:6px;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.book-btn:hover{
    background: linear-gradient(135deg, var(--green-soft), var(--green-dark));
}

/* NOT AVAILABLE */
.not-available{
    color: var(--danger);
    font-weight:700;
}

/* HEADER */
.page-header{
    text-align:center;
    margin-bottom:40px;
    font-size:24px;
    color: var(--blue-dark);
    font-weight:700;
}
</style>

<div class="page-container">

    <h2 class="page-header">Book Appointment With {{ doctor.username }}</h2>

    {% if availabilities %}
    <table class="appointment-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Morning Slot</th>
                <th>Evening Slot</th>
            </tr>
        </thead>
        <tbody>
            {% for a in availabilities %}
            <tr>
                <td>{{ a.date }}</td>

                <!-- Morning Slot -->
                <td>
                    {% if a.morning %}
                        <form action="{{ url_for('confirm_booking') }}" method="POST" style="display:inline;">
                            <input type="hidden" name="doctor_id" value="{{ doctor.id }}">
                            <input type="hidden" name="date" value="{{ a.date }}">
                            <input type="hidden" name="slot" value="morning">
                            <button type="submit" class="book-btn">Book Morning</button>
                        </form>
                    {% else %}
                        <span class="not-available">Not Available</span>
                    {% endif %}
                </td>

                <!-- Evening Slot -->
                <td>
                    {% if a.evening %}
                        <form action="{{ url_for('confirm_booking') }}" method="POST" style="display:inline;">
                            <input type="hidden" name="doctor_id" value="{{ doctor.id }}">
                            <input type="hidden" name="date" value="{{ a.date }}">
                            <input type="hidden" name="slot" value="evening">
                            <button type="submit" class="book-btn">Book Evening</button>
                        </form>
                    {% else %}
                        <span class="not-available">Not Available</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="not-available" style="text-align:center; padding:20px; font-size:16px;">
            No slots available for booking.
        </div>
    {% endif %}

</div>

{% endblock %}
